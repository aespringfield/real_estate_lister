function init(){enable(!0)}function enable(a){a?($(".newListing").on("submit",submitForm),$(".searchListings").on("submit",submitForm),$(".viewButtons").on("click",".apartments",displayListings),$(".viewButtons").on("click",".houses",displayListings)):($(".newListing").off("submit",submitForm),$(".searchListings").off("submit",submitForm),$(".viewButtons").off("click",".apartments",displayListings),$(".viewButtons").off("click",".houses",displayListings))}function displayListings(){getListings($(this).data("listingtype"))}function submitForm(a){if(a.preventDefault(),$form=$(this),"newListing"===$form.data("formname")){postNewListing(createListingObj($form))}else if("searchListings"===$form.data("formname")){console.log("searching");var b=createSearchURL($form);getSearchResults(b)}}function createSearchURL(a){var b,c=a.find(".typeInput").val(),d=a.find(".criterionInput").val(),e=a.find(".operatorInput").val(),f=a.find(".valueInput").val();return"sqft"===d?b=d:"price"===d&&(b=indicateCostOrRent(c)),{type:c,url:"/listings/"+c+"/"+b+"/"+e+"/"+f}}function getSearchResults(a){console.log(a.url),console.log(a.type),$.ajax({type:"GET",url:a.url,success:function(b){console.log(b),appendToDOM(b,a.type)}})}function createListingObj(a){var b=a.find(".cityInput").val(),c=a.find(".sqftInput").val(),d=a.find(".priceInput").val();return{city:b,sqft:c,type:a.find(".typeInput").val(),price:d}}function postNewListing(a){a.type;console.log(a),$.ajax({type:"POST",url:"/listings",data:a,success:function(a){console.log("SUCCESS! Response is",a)}})}function getListings(a){$.ajax({type:"GET",url:"/listings/"+a,success:function(b){console.log("Succesfully got:",b),appendToDOM(b,a)}})}function appendToDOM(a,b){var c=$(".listings").find("."+b).find(".display");c.empty();for(var d=0;d<a.length;d++){var e=a[d],f=createListingEl(e,b);c.append('<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12"></div>'),c.children().last().append(f)}showToggle(b)}function createListingEl(a,b){var c=indicateCostOrRent(b),d=a.city,e=a[c];return'<div class="listing"><div><b>City:</b> '+d+"</div><div><b>Square footage:</b> "+a.sqft+"</div><div><b>"+capitalize(c)+":</b> "+e+"</div></div>"}function indicateCostOrRent(a){var b;switch(a){case"houses":b="cost";break;case"apartments":b="rent"}return b}function capitalize(a){return a[0].toUpperCase()+a.slice(1)}function showToggle(a){$(".listings").children().addClass("hidden"),$(".listings").find("."+a).removeClass("hidden")}$(document).ready(function(){console.log("ready!"),init()});